(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(895)}])},895:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a,n,i=s(5893),o=s(7294),r=s(7066);function c(e){let{onCreate:t}=e,[s,a]=(0,o.useState)(""),[n,r]=(0,o.useState)("");return(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),s.trim()&&(t(s.trim(),n.trim()),a(""),r(""))},className:"bg-white p-4 rounded shadow",children:[(0,i.jsx)("div",{className:"flex gap-2",children:(0,i.jsx)("input",{value:s,onChange:e=>a(e.target.value),placeholder:"Work Title",className:"flex-1 p-2 border rounded"})}),(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)("input",{value:n,onChange:e=>r(e.target.value),placeholder:"Work Description",className:"w-full p-2 border rounded"})}),(0,i.jsx)("div",{className:"flex justify-end mt-3",children:(0,i.jsx)("button",{type:"submit",className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition text-sm",children:"Add"})})]})}function d(e){let{todo:t,onMarkDone:s,onDelete:a,onMarkInProgress:n}=e;return(0,i.jsxs)("li",{className:"grid grid-cols-4 items-center px-4 py-3 bg-white transition",children:[(0,i.jsx)("span",{className:"truncate",children:t.title}),(0,i.jsx)("span",{className:"truncate text-sm text-gray-600",children:t.description||"No description"}),(0,i.jsx)("span",{className:"text-xs font-medium ".concat("PENDING"===t.status?"text-yellow-600":"IN_PROGRESS"===t.status?"text-blue-600":"text-green-600"),children:t.status.replace("_"," ")}),(0,i.jsxs)("div",{className:"flex gap-2",children:["PENDING"===t.status&&(0,i.jsx)("button",{onClick:()=>n(t.id),className:"px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 transition text-sm",children:"In Progress"}),"IN_PROGRESS"===t.status&&(0,i.jsx)("button",{onClick:()=>s(t.id),className:"px-3 py-1 bg-green-600 text-white rounded hover:bg-green-700 transition text-sm",children:"Done"}),(0,i.jsx)("button",{onClick:()=>a(t.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition text-sm",children:"Delete"})]})]})}(a=n||(n={})).PENDING="PENDING",a.IN_PROGRESS="IN_PROGRESS",a.DONE="DONE";let l="http://localhost:3000",u={Authorization:"Bearer ".concat("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJhdmkiLCJpYXQiOjE3NTcyNDMyODcsImV4cCI6MTc4ODc3OTI4NywiYXVkIjoiIiwic3ViIjoiIiwibmFtZSI6ImF2aSIsIlN1cm5hbWUiOiJSb2NrZXQiLCJFbWFpbCI6ImF2aUBnbWFpbC5jb20ifQ.vlQVPmq5MNlyya2NzjcQrxK1D1he2gRRoDgsdZEBcgk"),"Content-Type":"application/json"};function h(){let[e,t]=(0,o.useState)([]),[s,a]=(0,o.useState)(!1),[h,m]=(0,o.useState)("ALL"),[x,p]=(0,o.useState)([]),N=e=>p(t=>[new Date().toLocaleTimeString()+": "+e,...t].slice(0,50)),g=async()=>{try{a(!0),N("Fetching todos");let e="ALL"===h?{}:{status:h},s=await r.Z.get("".concat(l,"/todos"),{params:e,headers:u});t(s.data),N("Fetched todos: "+s.data.length)}catch(e){N("Fetch error: "+(e.message||e))}finally{a(!1)}};(0,o.useEffect)(()=>{g()},[h]);let j=async(e,s)=>{try{N("Creating todo");let a=await r.Z.post("".concat(l,"/todos"),{title:e,description:s},{headers:u});N("Created todo"),t(e=>[a.data,...e])}catch(e){N("Create error: "+(e.message||e))}},b=async e=>{try{N("Updating todo to DONE "+e);let s=await r.Z.put("".concat(l,"/todos/").concat(e),{status:n.DONE},{headers:u});t(t=>t.map(t=>t.id===e?s.data:t)),N("Updated todo "+e)}catch(e){N("Update error: "+(e.message||e))}},y=async e=>{try{N("Updating todo to InProgress "+e);let s=await r.Z.put("".concat(l,"/todos/").concat(e),{status:n.IN_PROGRESS},{headers:u});t(t=>t.map(t=>t.id===e?s.data:t)),N("Updated todo "+e)}catch(e){N("Update error: "+(e.message||e))}},f=async e=>{try{N("Deleting todo "+e),await r.Z.delete("".concat(l,"/todos/").concat(e),{headers:u}),t(t=>t.filter(t=>t.id!==e)),N("Deleted todo "+e)}catch(e){N("Delete error: "+(e.message||e))}};return(0,i.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"To-Do App"}),(0,i.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,i.jsxs)("select",{value:h,onChange:e=>m(e.target.value),className:"px-2 py-1 border rounded",children:[(0,i.jsx)("option",{value:"ALL",children:"All"}),(0,i.jsx)("option",{value:"PENDING",children:"Pending"}),(0,i.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,i.jsx)("option",{value:"DONE",children:"Done"})]}),(0,i.jsx)("button",{onClick:g,className:"px-3 py-1 bg-gray-200 rounded",children:"Refresh"})]}),(0,i.jsx)(c,{onCreate:j}),(0,i.jsxs)("div",{className:"mt-10",children:[(0,i.jsx)("h2",{className:"font-medium mt-2",children:"To-Do List"}),s?(0,i.jsx)("div",{children:"Loading..."}):(0,i.jsxs)("ul",{className:"w-full border rounded-lg divide-y divide-gray-200",children:[(0,i.jsxs)("li",{className:"grid grid-cols-4 bg-gray-100 px-4 py-2 font-semibold text-gray-700",children:[(0,i.jsx)("span",{children:"Title"}),(0,i.jsx)("span",{children:"Description"}),(0,i.jsx)("span",{children:"Status"}),(0,i.jsx)("span",{children:"Actions"})]}),e.map(e=>(0,i.jsx)(d,{todo:e,onMarkDone:b,onDelete:f,onMarkInProgress:y},e.id))]})]}),(0,i.jsxs)("div",{className:"mt-8",children:[(0,i.jsx)("h2",{className:"font-medium",children:"Activity Log"}),(0,i.jsx)("div",{className:"mt-2 bg-white p-3 rounded shadow h-40 overflow-auto",children:x.map((e,t)=>(0,i.jsx)("div",{className:"text-sm text-gray-600",children:e},t))})]})]})}}},function(e){e.O(0,[66,888,774,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);